<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Controle de Estoque</title>
    <!-- Bootstrap CSS (via CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
    <h1>Bem-vindo ao Controle de Estoque</h1>

    <!-- Link para logout -->
    <p><a href="{{ url_for('auth.logout') }}">Sair</a></p>

    <!-- Exibição de mensagens (flash) -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul>
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <!-- Formulário para adicionar novo produto -->
    <h2>Adicionar Produto</h2>
    <form action="{{ url_for('routes.add') }}" method="post">
        <input type="text" name="nome" placeholder="Nome do Produto" required>
        <input type="number" name="quantidade" placeholder="Quantidade" required>
        <input type="number" step="0.01" name="preco" placeholder="Preço" required>
        <button type="submit">Adicionar</button>
    </form>

    <!-- Lista de produtos cadastrados -->
    <h2>Produtos</h2>
    <ul>
        {% for produto in produtos %}
            <li>
                <strong>{{ produto.nome }}</strong><br>
                Quantidade: {{ produto.quantidade }}<br>
                Preço: R$ {{ produto.preco }}

                <!-- Formulário para atualizar quantidade -->
                <form action="{{ url_for('routes.update', id=produto.id) }}" method="post" style="display:inline">
                    <input type="number" name="quantidade" value="{{ produto.quantidade }}" required>
                    <button type="submit">Atualizar</button>
                </form>

                <!-- Link para excluir o produto -->
                <a href="{{ url_for('routes.delete', id=produto.id) }}">Excluir</a>
            </li>
        {% endfor %}
    </ul>
</body>
</html>
